# Cursor

Guide pour utiliser Cursor avec CleanStack.

## Installation

### 1. Installer Cursor

T√©l√©chargez depuis [cursor.sh](https://cursor.sh)

### 2. Ouvrir le projet

```bash
cd your-cleanstack-project
cursor .
```

### 3. Configuration recommand√©e

**Settings > Cursor Settings**

- ‚úÖ Enable "Codebase indexing"
- ‚úÖ Enable "Auto-import suggestions"
- ‚úÖ Model: Claude 3.5 Sonnet (meilleur pour Clean Architecture)

## Utilisation avec CleanStack

### Cmd/Ctrl + K - Quick Edit

**Parfait pour :** Modifications locales et refactoring

```
S√©lectionnez du code ‚Üí Cmd+K

Prompts :
- "Ajoute validation pour phoneNumber"
- "Convertis en Result pattern"
- "Ajoute tests unitaires"
```

**Exemple :**

S√©lectionnez `Email.create()` ‚Üí Cmd+K :
```
Ajoute validation : email doit √™tre @company.com seulement
```

### Cmd/Ctrl + L - Chat

**Parfait pour :** Questions et g√©n√©ration multi-fichiers

```
Cmd+L pour ouvrir le chat

Prompts :
- "Explique la Dependency Rule dans ce projet"
- "O√π dois-je cr√©er un nouveau Value Object ?"
- "Cr√©e CreateProductUseCase selon le pattern du projet"
```

**Exemple :**
```
Cr√©e un Value Object Price avec validation :
- amount ‚â• 0
- currency dans ['EUR', 'USD', 'GBP']

Suit le pattern de Email.ts
```

### Tab - Autocomplete

**Parfait pour :** Compl√©tion de code

Cursor sugg√®re automatiquement en suivant vos patterns :

```typescript
// Tapez "export class ProductName"
// ‚Üí Cursor sugg√®re toute la structure ValueObject

export class ProductName extends ValueObject<{ value: string }> {
  protected validate(value: { value: string }): Result<{ value: string }> {
    // Suggestions bas√©es sur vos autres VO
  }
}
```

## Workflow recommand√©

### 1. Cr√©ation de Value Object

**Cmd+L:**
```
Cr√©e un Value Object PhoneNumber dans domain/user/ :
- Format international (+33...)
- 10-15 chiffres
- Validation stricte
Suis le pattern de Email.ts
```

### 2. Cr√©ation d'Entity

**Cmd+L:**
```
Cr√©e une Entity Product dans domain/product/ :
- Props: name (ProductName), price (Price), description (string)
- Factory create() avec validation
- M√©thode updatePrice()
- Utilise get() pour acc√©der aux props (pas de getters manuels)
```

### 3. Cr√©ation de Use Case

**Cmd+L:**
```
Cr√©e CreateProductUseCase dans application/use-cases/ :
1. Valide les inputs (ProductName, Price)
2. Cr√©e Product entity
3. Persiste via IProductRepository
4. Retourne Result<Product>

D√©pendances : injecte IProductRepository (interface)
```

### 4. Refactoring

**S√©lection + Cmd+K:**
```
S√©lectionnez la m√©thode

Prompt: "Extrait cette logique dans une m√©thode priv√©e"
Ou: "Convertis en Result pattern"
```

## Prompts utiles

### Architecture

```
@CLAUDE.md Explique la r√®gle de d√©pendances
```

```
O√π dois-je cr√©er un repository pour Product ?
Montre-moi la structure des dossiers.
```

### Code generation

```
G√©n√®re DrizzleProductRepository qui impl√©mente IProductRepository.
Utilise le pattern de DrizzleUserRepository.
```

```
Cr√©e le schema Drizzle pour Product dans packages/drizzle/src/schema/
```

### Testing

```
G√©n√®re les tests pour @domain/product/ProductName.ts
Coverage : 100%
```

## Fonctionnalit√©s avanc√©es

### @-mentions

R√©f√©rencez des fichiers pour donner du contexte :

```
@domain/user/Email.ts Cr√©e ProductName en suivant ce pattern
```

```
@application/use-cases/CreateUserUseCase.ts
Cr√©e CreateProductUseCase similaire
```

### Codebase search

```
Cmd+P puis tapez :
"Value Object" ‚Üí Trouve tous les Value Objects
"UseCase" ‚Üí Trouve tous les Use Cases
```

### Multi-file edit

Cursor peut √©diter plusieurs fichiers simultan√©ment :

```
Renomme Email en EmailAddress dans :
- domain/user/Email.ts
- domain/user/User.ts
- application/use-cases/CreateUserUseCase.ts
- adapters/out/persistence/mappers/UserMapper.ts
```

## Configuration Cursor Rules

Cr√©ez `.cursorrules` √† la racine :

```
# CleanStack Architecture Rules

## Dependency Rule
- domain/ ne peut JAMAIS importer de application/ ou adapters/
- application/ ne peut JAMAIS importer de adapters/
- adapters/ peut importer application/ et domain/

## Patterns obligatoires
- Value Objects : extends ValueObject, validate() obligatoire
- Entities : extends Entity, factory create(), pas de getters manuels (utiliser get())
- Use Cases : implements UseCase, retourne Result<T>
- Repositories : interface dans application/ports/, impl√©mentation dans adapters/out/

## Error handling
- JAMAIS throw dans domain/ ou application/
- TOUJOURS Result<T> pour les op√©rations qui peuvent √©chouer
- TOUJOURS Option<T> pour les queries qui peuvent retourner vide

## Imports interdits dans domain/
- @packages/drizzle
- next/server
- zod (sauf pour Value Object si vraiment n√©cessaire, privil√©gier regex)

## Tests obligatoires
- Chaque Value Object doit avoir tests unitaires
- Chaque Entity doit avoir tests unitaires
- Chaque Use Case doit avoir tests avec mocks
```

## Tips & Tricks

### Apprendre le codebase

```
Cmd+L: "Explique l'architecture de ce projet"
Cmd+L: "@CLAUDE.md R√©sume les r√®gles principales"
```

### Debugging

```
Cmd+L: "Pourquoi j'ai cette erreur TypeScript ?"
[Coller l'erreur]
```

### Code review

```
Cmd+L: "Review @application/use-cases/CreateUserUseCase.ts
V√©rifie :
- Dependency Rule
- Result pattern
- Validation
- Tests"
```

## Comparaison Cursor vs Claude Code

| Feature | Cursor | Claude Code |
|---------|--------|-------------|
| **Autocomplete** | ‚úÖ Excellent | ‚ö†Ô∏è Basique |
| **Chat** | ‚úÖ Bon | ‚úÖ Excellent |
| **Multi-fichiers** | ‚úÖ Bon | ‚úÖ Excellent |
| **Understand Architecture** | ‚ö†Ô∏è Moyen | ‚úÖ Excellent |
| **Conventional Commits** | ‚ùå Non | ‚úÖ Oui |
| **Prix** | üí∞ $20/mois | üí∞ $20/mois |

**Recommandation :**
- **Cursor** ‚Üí √âdition rapide, autocomplete
- **Claude Code** ‚Üí Features complexes, architecture

**Combo gagnant :** Utiliser les deux !
- Cursor pour le dev quotidien
- Claude Code pour les features complexes

## Ressources

- [Cursor Documentation](https://cursor.sh/docs)
- [Claude Code Guide](/docs/ai/claude-code)
- [Prompts utiles](/docs/ai/prompts)

## Prochaines √©tapes

- [Prompts ‚Üí](/docs/ai/prompts) - Collection compl√®te
- [Claude Code ‚Üí](/docs/ai/claude-code) - Alternative puissante
- [Votre premier Use Case ‚Üí](/docs/guides/first-use-case) - Pratique
