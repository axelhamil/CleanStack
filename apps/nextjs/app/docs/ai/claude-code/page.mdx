# Claude Code

Best tool for CleanStack development.

## Setup

```bash
# Install
npm install -g @anthropic-ai/claude-code

# Login
claude login

# Open project
cd your-project && claude
```

## Why Claude Code?

- Reads `CLAUDE.md` at startup
- Has **5 built-in skills** for rapid development
- Has **4 specialized agents** for architecture & quality
- Respects Dependency Rule automatically
- Generates DDD patterns correctly
- Creates atomic commits

## Built-in Skills

CleanStack includes 5 AI skills (`.claude/skills/`):

| Skill | Command | Description |
|-------|---------|-------------|
| EventStorming | `/eventstorming` | Domain discovery with stakeholders |
| Feature PRD | `/feature-prd` | Generate feature requirements |
| Gen Domain | `/gen-domain` | Generate domain layer code |
| Gen UseCase | `/gen-usecase` | Generate use cases + DI |
| Gen Tests | `/gen-tests` | Generate BDD-style tests |

**Example workflow:**
```bash
# 1. Discovery
/eventstorming "E-commerce cart system"

# 2. Requirements
/feature-prd "Add to cart feature"

# 3. Generate domain
/gen-domain Cart

# 4. Generate use case
/gen-usecase AddToCart

# 5. Generate tests
/gen-tests AddToCartUseCase
```

## Built-in Agents

4 specialized agents (`.claude/agents/`):

| Agent | Purpose |
|-------|---------|
| Feature Architect | Design feature architecture |
| Code Reviewer | Review code quality & patterns |
| Test Writer | Write comprehensive tests |
| Doc Writer | Generate documentation |

## Essential Prompts

### Create Feature

```
Create Product feature with Clean Architecture:

**Domain** (domain/product/)
- Value Object: ProductName (1-100 chars)
- Value Object: Price (amount ≥ 0, currency EUR/USD)
- Entity: Product (name, description, price)

**Application** (application/)
- Interface: IProductRepository
- Use Case: CreateProductUseCase
- Use Case: GetProductByIdUseCase

**Adapters** (adapters/)
- Drizzle schema
- DrizzleProductRepository
- Route: POST /api/products
- Route: GET /api/products/[id]

**Infrastructure**
- Register in DI container
- Generate migration

**Tests**
- Unit tests for VOs and Entity
```

### Add Method

```
In User entity, add canMakePurchase():

Rules:
1. User must be active
2. User must not be banned
3. Email must be verified

Return Result<boolean> with explicit error.
Add tests.
```

### Refactoring

```
Rename Email to EmailAddress:
- domain/user/Email.ts → EmailAddress.ts
- Update all imports
- Update tests

Commit: "refactor(domain): rename Email to EmailAddress"
```

### Debugging

```
I have this error:
[paste error]

Analyze and fix while respecting Clean Architecture.
```

## Workflow

```bash
# 1. Create feature
"Create Cart feature with Clean Architecture"

# 2. Review
"Explain your architecture choices"

# 3. Test
pnpm test

# 4. Commit
"Commit with Conventional Commits"
```

## Tips

**Be specific:**
```
✅ "In the domain layer, create..."
❌ "Create something for users"
```

**Ask for tests:**
```
✅ "Generate unit tests too"
❌ [forget tests]
```

**Reference CLAUDE.md:**
```
✅ "According to CLAUDE.md, how to..."
```

## Next Steps

- [Cursor](/docs/ai/cursor)
- [Prompts](/docs/ai/prompts)
