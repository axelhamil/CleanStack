# Result Pattern

Explicit error handling without exceptions.

## Why Result?

```typescript
// ❌ Exception - can crash anywhere
function divide(a: number, b: number): number {
  if (b === 0) throw new Error('Division by zero')
  return a / b
}

// ✅ Result - explicit, type-safe
function divide(a: number, b: number): Result<number> {
  if (b === 0) return Result.fail('Division by zero')
  return Result.ok(a / b)
}
```

## API

```typescript
// Success
const success = Result.ok(42)
success.isSuccess  // true
success.value      // 42

// Failure
const failure = Result.fail('error')
failure.isFailure  // true
failure.error      // 'error'
```

## Chaining

```typescript
async execute(input: CreateUserInput): Promise<Result<User>> {
  const emailOrError = Email.create(input.email)
  if (emailOrError.isFailure) return Result.fail(emailOrError.error)

  const userOrError = User.create({ email: emailOrError.value })
  if (userOrError.isFailure) return Result.fail(userOrError.error)

  return await this.repo.create(userOrError.value)
}
```

## Combining

```typescript
const email = Email.create(input.email)
const name = UserName.create(input.name)

const combined = Result.combine([email, name])
if (combined.isFailure) return Result.fail(combined.error)

// All succeeded
```

## Usage Patterns

### Value Objects
```typescript
static create(email: string): Result<Email> {
  if (!EMAIL_REGEX.test(email)) return Result.fail('Invalid email')
  return Result.ok(new Email({ value: email.toLowerCase() }))
}
```

### Use Cases
```typescript
async execute(input: Input): Promise<Result<User>> {
  // All operations return Result
}
```

### Repositories
```typescript
async create(user: User): Promise<Result<User>>
async findById(id: UUID): Promise<Result<Option<User>>>
```

### Controllers
```typescript
const result = await useCase.execute(input)
if (result.isFailure) {
  return Response.json({ error: result.error }, { status: 400 })
}
return Response.json(result.value, { status: 201 })
```

## Rules

### ✅ Do
```typescript
return Result.fail('error')
return Result.ok(value)
if (result.isFailure) return Result.fail(result.error)
```

### ❌ Don't
```typescript
throw new Error('...')     // Never in Domain/Application
return null                // Use Result.fail or Option
result.value               // Without checking isSuccess first
```

## Next Steps

- [Option Pattern](/docs/core-concepts/option)
- [Value Objects](/docs/core-concepts/value-objects)
